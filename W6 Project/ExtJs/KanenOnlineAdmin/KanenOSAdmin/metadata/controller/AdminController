{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "AdminController"
    },
    "name": "MyController",
    "designerId": "3569a569-9f1c-455f-a9ba-8de788827777",
    "cn": [
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "productListPanel",
                "selector": "#productListPanel"
            },
            "name": "productListPanel",
            "designerId": "8d0e0faf-3e8c-4654-803e-7aedfc8e2ab0"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "customerConfirmPanel",
                "selector": "#customerConfirmPanel"
            },
            "name": "customerConfirmPanel",
            "designerId": "130ecbf2-9e67-4aa9-9f1e-4476f04f20b3"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "orderRequestsPanel",
                "selector": "#orderRequestsPanel"
            },
            "name": "orderRequestsPanel",
            "designerId": "e26013c7-9a3e-44c2-84b1-c0bbe856ad0f"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "viewAllOrderPanel",
                "selector": "#viewAllOrderPanel"
            },
            "name": "viewAllOrderPanel",
            "designerId": "201f2005-70b7-4e39-846f-8b3c1402b628"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "centerContainer",
                "selector": "#CenterContainer"
            },
            "name": "centerContainer",
            "designerId": "a0e638c5-ae5b-4959-b2f5-677016096997"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnCustomerRequest",
                "designer|targetType": "MyButton2",
                "fn": "onBtnCustomerRequestClick",
                "implHandler": [
                    "this.getCustomerConfirmPanel().show();",
                    "this.getOrderRequestsPanel().hide();",
                    "this.getViewAllOrderPanel().hide();",
                    "",
                    "var customerRequestGrid = Ext.getCmp('membershipRequestGrid');",
                    "var customerRequestStore = customerRequestGrid.getStore();",
                    "",
                    "customerRequestStore.clearData();",
                    "customerRequestGrid.getView().refresh();",
                    "",
                    "Ext.Ajax.request({",
                    "    url: window.location.pathname +'admin/userRequest',",
                    "    method: 'POST',",
                    "",
                    "    scope: this,",
                    "    success: function(response){",
                    "        var responseText = Ext.decode(response.responseText);",
                    "        for (var ctr = 0; ctr < responseText.userRequest.length; ctr++){",
                    "            var userRequest = {",
                    "                userId:responseText.userRequest[ctr].userId,",
                    "                fullName: responseText.userRequest[ctr].fullname,",
                    "                currentMembershipLevel: responseText.userRequest[ctr].currentType,",
                    "                requestedMembershipLevel: responseText.userRequest[ctr].requestType,",
                    "                isForApproval: responseText.userRequest[ctr].forApproval,",
                    "                isRequestApproved: responseText.userRequest[ctr].isApproved",
                    "            };",
                    "            customerRequestStore.add(userRequest);",
                    "       }",
                    "  },",
                    "    failure: function(){",
                    "        Ext.MessageBox.alert('Loading Failed','Unable to connect to server');",
                    "    }",
                    "",
                    "});"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onBtnCustomerRequestClick",
            "designerId": "52efd37d-6f8e-4ea5-bce3-58a6321639fb"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#confirmOrderBtn",
                "designer|targetType": "MyButton3",
                "fn": "onConfirmOrderBtnClick",
                "implHandler": [
                    "this.getOrderRequestsPanel().show();",
                    "this.getViewAllOrderPanel().hide();",
                    "this.getCustomerConfirmPanel().hide();",
                    "",
                    "var orderGrid = Ext.getCmp('orderRequestsGrid');",
                    "var orderGridStore = orderGrid.getStore();",
                    "",
                    "orderGridStore.remoteFilter = false;",
                    "orderGridStore.clearFilter();",
                    "orderGridStore.filter('orderStatus','Pending Order');",
                    "",
                    "orderGridStore.clearData();",
                    "orderGrid.getView().refresh();",
                    "",
                    "Ext.Ajax.request({",
                    "     url: window.location.pathname +'admin/getOrders',",
                    "     method: 'POST',",
                    "",
                    "    scope: this,",
                    "    success: function(response){",
                    "          var responseText = Ext.decode(response.responseText);",
                    "",
                    "       for (var ctr = 0; ctr < responseText.orderList.length; ctr++){",
                    "            var order = {",
                    "                orderId: responseText.orderList[ctr].order.orderId,",
                    "                userId: responseText.orderList[ctr].userID,",
                    "                userFullName: responseText.orderList[ctr].fullName,",
                    "                orderDate: responseText.orderList[ctr].order.orderDate,",
                    "                totalCost: responseText.orderList[ctr].order.totalCost,",
                    "                orderStatus: responseText.orderList[ctr].order.orderStatus",
                    "",
                    "            };",
                    "",
                    "            orderGridStore.add(order);",
                    "        }",
                    "    },",
                    "",
                    "    failure: function(){",
                    "        Ext.MessageBox.alert('Loading Failed','Unable to connect to server');",
                    "    }",
                    "});"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onConfirmOrderBtnClick",
            "designerId": "2eb005c0-82db-41f4-b4d9-0d24f786a954"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnLogin",
                "designer|targetType": "MyButton",
                "fn": "onBtnLoginClick",
                "implHandler": [
                    "var userName = Ext.getCmp('txtUsername').getValue();",
                    "var userPassword = Ext.getCmp('txtPassword').getValue();",
                    "var userStore = Ext.getStore('userStore');",
                    "userStore.removeAll();",
                    "",
                    "Ext.Ajax.request({",
                    "",
                    "    url: window.location.pathname +'admin/login',",
                    "    method: 'POST',",
                    "",
                    "    params: {",
                    "        userName: userName,",
                    "        userPassword: userPassword",
                    "    },",
                    "    scope:this,",
                    "    success:function(response){",
                    "        var responseText = Ext.decode(response.responseText);",
                    "",
                    "        if (responseText.success == true){",
                    "               if (responseText.user.userRole != 'Admin'){",
                    "                    Ext.MessageBox.alert('Status', 'Unauthorized User');",
                    "                    Ext.getCmp('txtUsername').setValue();",
                    "                    Ext.getCmp('txtPassword').setValue();",
                    "                }",
                    "                else{",
                    "",
                    "                    var loggedInUser = {",
                    "                        userId: responseText.user.userId,",
                    "                        userName: responseText.user.username,",
                    "                        userFullName: responseText.user.fullName,",
                    "                        userRole: responseText.user.userRole,",
                    "                        userPassword: ''",
                    "                    };",
                    "",
                    "                    userStore.add(loggedInUser);",
                    "                    Ext.MessageBox.alert('Status', 'Logged in successfully');",
                    "                    var lblName = Ext.getCmp('lblName').text;",
                    "                    lblName = Ext.getStore('userStore').data.items[0].data.userFullName;",
                    "                    Ext.getCmp('txtUsername').setValue();",
                    "                    Ext.getCmp('txtPassword').setValue();",
                    "                    this.getLoginContainer().hide();",
                    "                    this.getAdminPageContainer().show();",
                    "",
                    "                }",
                    "        } else {",
                    "            Ext.MessageBox.alert('Login Failed', 'Invalid Credentials');",
                    "            Ext.getCmp('txtUsername').setValue();",
                    "            Ext.getCmp('txtPassword').setValue();",
                    "        }",
                    "",
                    "    },",
                    "    failure:function(){",
                    "        Ext.MessageBox.alert('Login Failed', 'Unable to connect to server, Please try again.');",
                    "    }",
                    "",
                    "});"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onBtnLoginClick",
            "designerId": "9ea1ff08-986e-4dc1-8aa8-ddd7110d4e42"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "username",
                "selector": "#txtUsername"
            },
            "name": "username",
            "designerId": "d412760c-0643-4eb2-889a-ca6800d7cfba"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "password",
                "selector": "#txtPassword"
            },
            "name": "password",
            "designerId": "b8b25e34-4e49-480a-b067-592cf2352b8d"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "loginContainer",
                "selector": "#loginContainer"
            },
            "name": "loginContainer",
            "designerId": "58372634-aa62-482f-abc0-6456361f505d"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "adminPageContainer",
                "selector": "#adminContainer"
            },
            "name": "adminPageContainer",
            "designerId": "bfd96f49-6cb8-4b5b-a038-fd65594d8e75"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#viewAllOrderGrid",
                "designer|targetType": "MyGridPanel2",
                "fn": "onViewAllOrderGridItemDblClick",
                "implHandler": [
                    "var viewAllOrderGrid = Ext.getCmp('viewAllOrderGrid');",
                    "         var orderItems = Ext.getStore('orderItems');",
                    "         var selModel = viewAllOrderGrid.getSelectionModel();",
                    "         var selectedRecords = selModel.getSelection();",
                    "         var selectionCount = selModel.getCount();",
                    "         var orderId = selectedRecords[0].data.orderId;",
                    "",
                    "         orderItems.clearFilter(true);",
                    "         orderItems.filter('orderId', orderId);",
                    "        Ext.create('Ext.window.Window',{",
                    "",
                    "                               rendetTo: Ext.getBody(),",
                    "                               bodyPadding: 10,",
                    "                               title: 'Order Summary',",
                    "                               closable: true,",
                    "                               autoShow: true,",
                    "                               resizable: false,",
                    "                               modal: true,",
                    "                               draggable: false,",
                    "                               width:1054,",
                    "                               height:600,",
                    "                               items:[ {",
                    "",
                    "                                           xtype: 'gridpanel',",
                    "                                           id: 'orderSummaryGridPanel',",
                    "                                           itemId: 'orderSummaryGridPanel',",
                    "                                           title: 'List of Transactions',",
                    "                                           store: 'orderItems',",
                    "                                                    columns: [",
                    "                                                        {",
                    "                                                            xtype: 'gridcolumn',",
                    "                                                            width: 500,",
                    "                                                            flex:1,",
                    "                                                            dataIndex: 'productId',",
                    "                                                            text: 'Product Id'",
                    "                                                        },",
                    "                                                         {",
                    "                                                            xtype: 'gridcolumn',",
                    "                                                            width: 200,",
                    "                                                              flex:1,",
                    "                                                            dataIndex: 'productName',",
                    "                                                            text: 'Product Name'",
                    "                                                        },",
                    "                                                       {",
                    "                                                            xtype: 'numbercolumn',",
                    "                                                            width: 272,",
                    "                                                            flex:1,",
                    "                                                            dataIndex: 'quantity',",
                    "                                                            text: 'Quantity'",
                    "                                                        },",
                    "                                                       {",
                    "                                                            xtype: 'numbercolumn',",
                    "                                                            width: 272,",
                    "                                                            flex:1,",
                    "                                                            dataIndex: 'productPrice',",
                    "                                                            text: 'Price'",
                    "                                                        }",
                    "                                                    ]",
                    "                                        }",
                    "                                      ]",
                    "                });",
                    "                var orderStore = Ext.getStore('orderItems');",
                    "                var orderId = orderStore.data.items[0].data.orderId;"
                ],
                "name": "itemdblclick",
                "scope": "me"
            },
            "name": "onViewAllOrderGridItemDblClick",
            "designerId": "d387b3cf-79a8-46c3-861f-86fe7b4fbdb4"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#viewAllOrderBtn",
                "designer|targetType": "MyButton4",
                "fn": "onViewAllOrderBtnClick",
                "implHandler": [
                    "this.getOrderRequestsPanel().hide();",
                    "this.getCustomerConfirmPanel().hide();",
                    "this.getProductListPanel().hide();",
                    "this.getViewAllOrderPanel().show();",
                    "",
                    "var viewAllGrid = Ext.getCmp('viewAllOrderGrid');",
                    "var viewAllGridStore = viewAllGrid.getStore();",
                    "var orderItemsStore = Ext.getStore('orderItems');",
                    "",
                    "orderItemsStore.removeAll();",
                    "viewAllGridStore.clearData();",
                    "viewAllGrid.getView().refresh();",
                    "",
                    "",
                    "Ext.Ajax.request({",
                    "     url: window.location.pathname +'admin/getOrders',",
                    "     method: 'POST',",
                    "",
                    "    scope: this,",
                    "    success: function(response){",
                    "        var responseText = Ext.decode(response.responseText);",
                    "",
                    "        for (var ctr = 0; ctr < responseText.orderList.length; ctr++){",
                    "            var order = {",
                    "                orderId: responseText.orderList[ctr].order.orderId,",
                    "                userId: responseText.orderList[ctr].userID,",
                    "                userFullName: responseText.orderList[ctr].fullName,",
                    "                orderDate: responseText.orderList[ctr].order.orderDate,",
                    "                totalCost: responseText.orderList[ctr].order.totalCost,",
                    "                orderStatus: responseText.orderList[ctr].order.orderStatus",
                    "",
                    "            };",
                    "",
                    "            viewAllGridStore.add(order);",
                    "        }",
                    "",
                    "",
                    "        for (var i = 0; i < responseText.itemList.length; i++){",
                    "            var items = {",
                    "                orderId: responseText.itemList[i].orderId,",
                    "                orderItemId: responseText.itemList[i].item.orderItemId,",
                    "                productId: responseText.itemList[i].item.productId,",
                    "                productName: responseText.itemList[i].productname,",
                    "                quantity: responseText.itemList[i].item.quantity,",
                    "                productPrice: responseText.itemList[i].item.productPrice",
                    "",
                    "            };",
                    "",
                    "            orderItemsStore.add(items);",
                    "        }",
                    "    },",
                    "",
                    "    failure: function(){",
                    "        Ext.MessageBox.alert('Loading Failed','Unable to connect to server');",
                    "    }",
                    "",
                    "});"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onViewAllOrderBtnClick",
            "designerId": "e61f5cdd-ac05-4227-b069-04ca1d11a104"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnApproveRequest",
                "designer|targetType": "MyButton5",
                "fn": "onBtnApproveRequestClick",
                "implHandler": [
                    "var userRequestGrid = Ext.getCmp('membershipRequestGrid');",
                    "var userGridStore = userRequestGrid.getStore();",
                    "var selectedRows = userRequestGrid.getSelectionModel().getSelection()[0];",
                    "var rowIndex = userGridStore.indexOf(selectedRows);",
                    "if (rowIndex >-1 ){",
                    "    var userId = selectedRows.data.userId;",
                    "    var requestedMembershipLevel = selectedRows.data.requestedMembershipLevel;",
                    "    Ext.Msg.confirm('Approve Request', 'Do you want to Approve this request?',function(btn){",
                    "        if (btn==='yes'){",
                    "//                userGridStore.data.items[rowIndex].data.currentMembershipLevel =  userGridStore.data.items[rowIndex].data.requestedMembershipLevel;",
                    "//                userRequestGrid.getView().refresh();",
                    "                Ext.Ajax.request({",
                    "                    url: window.location.pathname +'update/membershipApproval',",
                    "                    method: 'POST',",
                    "                        params:{",
                    "                        userId: userId,",
                    "                        approvedType:requestedMembershipLevel,",
                    "                        isApproved:1",
                    "",
                    "                        },",
                    "",
                    "                scope:this,",
                    "                success: function(response){",
                    "                    var responseText = Ext.decode(response.responseText);",
                    "",
                    "                }",
                    "",
                    "            });",
                    "",
                    "        }",
                    "    });} else {",
                    "       Ext.MessageBox.alert('Status','Please select a request to approve');",
                    "}"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onBtnApproveRequestClick",
            "designerId": "02a0b07c-1be4-41ab-a371-8e80e109dc7f"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnRejectRequest",
                "designer|targetType": "MyButton6",
                "fn": "onBtnRejectRequestClick",
                "implHandler": [
                    "var userRequestGrid = Ext.getCmp('membershipRequestGrid');",
                    "var userGridStore = userRequestGrid.getStore();",
                    "var selectedRows = userRequestGrid.getSelectionModel().getSelection()[0];",
                    "var rowIndex = userGridStore.indexOf(selectedRows);",
                    "if (rowIndex >-1 ){",
                    "    var userId = selectedRows.data.userId;",
                    "    var requestedMembershipLevel = selectedRows.data.requestedMembershipLevel;",
                    "    Ext.Msg.confirm('Approve Request', 'Do you want to Reject this request?',function(btn){",
                    "        if (btn==='yes'){",
                    "              Ext.Ajax.request({",
                    "                    url: window.location.pathname +'update/membershipApproval',",
                    "                    method: 'POST',",
                    "                        params:{",
                    "                        userId: userId,",
                    "                        approvedType:requestedMembershipLevel,",
                    "                        isApproved:0",
                    "",
                    "                        },",
                    "",
                    "                scope:this,",
                    "                success: function(response){",
                    "                    var responseText = Ext.decode(response.responseText);",
                    "",
                    "                }",
                    "",
                    "            });",
                    "            userGridStore.remove(selectedRows);",
                    "        }",
                    "    });} else {",
                    "       Ext.MessageBox.alert('Status','Please select a request ');",
                    "}"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onBtnRejectRequestClick",
            "designerId": "5c1ae895-ac31-4961-9faf-e5470dbf8f08"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnSaveUpdates",
                "designer|targetType": "MyButton1",
                "fn": "onBtnSaveUpdatesClick",
                "implHandler": [
                    "",
                    "",
                    "var orderRequestsGrid = Ext.getCmp('orderRequestsGrid');",
                    "var orderRequestsStore = orderRequestsGrid.getStore();",
                    "var selectedRows = orderRequestsGrid.getSelectionModel().getSelection()[0];",
                    "var rowIndex = orderRequestsStore.indexOf(selectedRows);",
                    "if (rowIndex >-1 ){",
                    "    var userId = selectedRows.data.userId;",
                    "    var orderStatus = selectedRows.data.orderStatus;",
                    "    Ext.Msg.confirm('Approve Request', 'Do you want to Approve this request?',function(btn){",
                    "        if (btn==='yes'){",
                    "                Ext.Ajax.request({",
                    "                    url: window.location.pathname +'update/updateOrderStatus',",
                    "                    method: 'POST',",
                    "                        params:{",
                    "                            userId: userId,",
                    "                            orderStatus: orderStatus",
                    "                        },",
                    "",
                    "                scope:this,",
                    "                success: function(response){",
                    "                    var responseText = Ext.decode(response.responseText);",
                    "                     Ext.MessageBox.alert('Status','Order Updated');",
                    "",
                    "                }",
                    "",
                    "            });",
                    "",
                    "        }",
                    "    });} else {",
                    "       Ext.MessageBox.alert('Status','Please select a request to approve');",
                    "}"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onBtnSaveUpdatesClick",
            "designerId": "d2466c1e-66cf-4193-98c0-160bee706ef0"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#membershipRequest",
                "designer|targetType": "MyMenuItem1",
                "fn": "onMembershipRequestClick",
                "implHandler": [
                    "this.getCustomerConfirmPanel().show();",
                    "this.getOrderRequestsPanel().hide();",
                    "this.getViewAllOrderPanel().hide();",
                    "this.getProductListPanel().hide();",
                    "",
                    "",
                    "var customerRequestGrid = Ext.getCmp('membershipRequestGrid');",
                    "var customerRequestStore = customerRequestGrid.getStore();",
                    "",
                    "customerRequestStore.clearData();",
                    "customerRequestGrid.getView().refresh();",
                    "",
                    "Ext.Ajax.request({",
                    "    url: window.location.pathname +'admin/userRequest',",
                    "    method: 'POST',",
                    "",
                    "    scope: this,",
                    "    success: function(response){",
                    "        var responseText = Ext.decode(response.responseText);",
                    "        for (var ctr = 0; ctr < responseText.userRequest.length; ctr++){",
                    "            var userRequest = {",
                    "                userId:responseText.userRequest[ctr].userId,",
                    "                fullName: responseText.userRequest[ctr].fullname,",
                    "                currentMembershipLevel: responseText.userRequest[ctr].currentType,",
                    "                requestedMembershipLevel: responseText.userRequest[ctr].requestType,",
                    "                isForApproval: responseText.userRequest[ctr].forApproval,",
                    "                isRequestApproved: responseText.userRequest[ctr].isApproved",
                    "            };",
                    "            customerRequestStore.add(userRequest);",
                    "       }",
                    "  },",
                    "    failure: function(){",
                    "        Ext.MessageBox.alert('Loading Failed','Unable to connect to server');",
                    "    }",
                    "",
                    "});"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onMembershipRequestClick",
            "designerId": "34f26461-14ab-4f8c-a584-b8337038c534"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#orderReqeust",
                "designer|targetType": "MyMenuItem2",
                "fn": "onOrderRequestClick",
                "implHandler": [
                    "this.getOrderRequestsPanel().show();",
                    "this.getViewAllOrderPanel().hide();",
                    "this.getCustomerConfirmPanel().hide();",
                    "this.getProductListPanel().hide();",
                    "",
                    "",
                    "var orderGrid = Ext.getCmp('orderRequestsGrid');",
                    "var orderGridStore = orderGrid.getStore();",
                    "",
                    "orderGridStore.remoteFilter = false;",
                    "orderGridStore.clearFilter();",
                    "orderGridStore.filter('orderStatus','Pending Order');",
                    "",
                    "orderGridStore.clearData();",
                    "orderGrid.getView().refresh();",
                    "",
                    "Ext.Ajax.request({",
                    "     url: window.location.pathname +'admin/getOrders',",
                    "     method: 'POST',",
                    "",
                    "    scope: this,",
                    "    success: function(response){",
                    "          var responseText = Ext.decode(response.responseText);",
                    "",
                    "       for (var ctr = 0; ctr < responseText.orderList.length; ctr++){",
                    "            var order = {",
                    "                orderId: responseText.orderList[ctr].order.orderId,",
                    "                userId: responseText.orderList[ctr].userID,",
                    "                userFullName: responseText.orderList[ctr].fullName,",
                    "                orderDate: responseText.orderList[ctr].order.orderDate,",
                    "                totalCost: responseText.orderList[ctr].order.totalCost,",
                    "                orderStatus: responseText.orderList[ctr].order.orderStatus",
                    "",
                    "            };",
                    "",
                    "            orderGridStore.add(order);",
                    "        }",
                    "    },",
                    "",
                    "    failure: function(){",
                    "        Ext.MessageBox.alert('Loading Failed','Unable to connect to server');",
                    "    }",
                    "});"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onOrderRequestClick",
            "designerId": "a3c95ef4-d741-4fbc-83f2-48f42f568d1f"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#viewAllOrder",
                "designer|targetType": "MyMenuItem4",
                "fn": "onViewAllOrderClick",
                "implHandler": [
                    "this.getOrderRequestsPanel().hide();",
                    "this.getCustomerConfirmPanel().hide();",
                    "this.getProductListPanel().hide();",
                    "this.getViewAllOrderPanel().show();",
                    "",
                    "var viewAllGrid = Ext.getCmp('viewAllOrderGrid');",
                    "var viewAllGridStore = viewAllGrid.getStore();",
                    "var orderItemsStore = Ext.getStore('orderItems');",
                    "",
                    "orderItemsStore.removeAll();",
                    "viewAllGridStore.clearData();",
                    "viewAllGrid.getView().refresh();",
                    "",
                    "",
                    "Ext.Ajax.request({",
                    "     url: window.location.pathname +'admin/getOrders',",
                    "     method: 'POST',",
                    "",
                    "    scope: this,",
                    "    success: function(response){",
                    "        var responseText = Ext.decode(response.responseText);",
                    "",
                    "        for (var ctr = 0; ctr < responseText.orderList.length; ctr++){",
                    "            var order = {",
                    "                orderId: responseText.orderList[ctr].order.orderId,",
                    "                userId: responseText.orderList[ctr].userID,",
                    "                userFullName: responseText.orderList[ctr].fullName,",
                    "                orderDate: responseText.orderList[ctr].order.orderDate,",
                    "                totalCost: responseText.orderList[ctr].order.totalCost,",
                    "                orderStatus: responseText.orderList[ctr].order.orderStatus",
                    "",
                    "            };",
                    "",
                    "            viewAllGridStore.add(order);",
                    "        }",
                    "",
                    "",
                    "        for (var i = 0; i < responseText.itemList.length; i++){",
                    "            var items = {",
                    "                orderId: responseText.itemList[i].orderId,",
                    "                orderItemId: responseText.itemList[i].item.orderItemId,",
                    "                productId: responseText.itemList[i].item.productId,",
                    "                productName: responseText.itemList[i].productname,",
                    "                quantity: responseText.itemList[i].item.quantity,",
                    "                productPrice: responseText.itemList[i].item.productPrice",
                    "",
                    "            };",
                    "",
                    "            orderItemsStore.add(items);",
                    "        }",
                    "    },",
                    "",
                    "    failure: function(){",
                    "        Ext.MessageBox.alert('Loading Failed','Unable to connect to server');",
                    "    }",
                    "",
                    "});"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onViewAllOrderClick",
            "designerId": "5b2527cd-515f-49aa-8fdd-225d054b7e1a"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#products",
                "designer|targetType": "MyMenuItem",
                "fn": "onProductsClick",
                "implHandler": [
                    "        this.getOrderRequestsPanel().hide();",
                    "        this.getCustomerConfirmPanel().hide();",
                    "        this.getViewAllOrderPanel().hide();",
                    "        this.getProductListPanel().show();",
                    "",
                    "        var productGrid = Ext.getCmp('producListGrid');",
                    "        var productGridStore = productGrid.getStore();",
                    "",
                    "        productGridStore.removeAll();",
                    "        productGridStore.clearData();",
                    "        productGrid.getView().refresh();",
                    "",
                    "",
                    "        Ext.Ajax.request({",
                    "             url: window.location.pathname +'admin/getProducts',",
                    "             method: 'POST',",
                    "",
                    "            scope: this,",
                    "            success: function(response){",
                    "                var responseText = Ext.decode(response.responseText);",
                    "",
                    "         ",
                    "                for (var i = 0; i < responseText.itemList.length; i++){",
                    "                    var items = {",
                    "                        orderId: responseText.itemList[i].orderId,",
                    "                        orderItemId: responseText.itemList[i].item.orderItemId,",
                    "                        productId: responseText.itemList[i].item.productId,",
                    "                        productName: responseText.itemList[i].productname,",
                    "                        quantity: responseText.itemList[i].item.quantity,",
                    "                        productPrice: responseText.itemList[i].item.productPrice",
                    "",
                    "                    };",
                    "",
                    "                    productGridStore.add(items);",
                    "                }",
                    "            },",
                    "",
                    "            failure: function(){",
                    "                Ext.MessageBox.alert('Loading Failed','Unable to connect to server');",
                    "            }",
                    "",
                    "        });"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onProductsClick",
            "designerId": "60a661a5-1d8e-452f-875f-f4af2623ab30"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#logout",
                "designer|targetType": "MyMenuItem5",
                "fn": "onLogoutClick",
                "implHandler": [
                    "        var userStore  = Ext.getStore('userStore');",
                    "        userStore.removeAll();",
                    "        Ext.Msg.alert('Status', 'Signing out.');",
                    "        ",
                    "        this.getAdminPageContainer().hide();",
                    "        this.getLoginContainer().show();"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onLogoutClick",
            "designerId": "16343560-228b-4e9b-adac-0b1add354241"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnAddProduct",
                "designer|targetType": "MyButton7",
                "fn": "onBtnAddProductClick",
                "implHandler": [
                    "Ext.create('Ext.window.Window',",
                    "           {",
                    "               renderTo : Ext.getBody(),",
                    "               bodyPadding: 10,",
                    "               title: 'Add Product',",
                    "               closable: true,",
                    "               autoShow: true,",
                    "               resizable:false,",
                    "               draggable: false,",
                    "               modal: true,",
                    "               width:800,",
                    "               height:250,",
                    "               items: [",
                    "                   {",
                    "                       xtype: 'form',",
                    "                       autoScroll: true,",
                    "                       bodyBorder: true,",
                    "                       bodyPadding: 10,",
                    "                       modal:true,",
                    "",
                    "                       layout: {",
                    "                           type: 'vbox',",
                    "                           align: 'stretch'",
                    "                       },",
                    "                       items: [",
                    "                           {",
                    "                               xtype: 'textfield',",
                    "                               width: 800,",
                    "                               id: 'txtProductName',",
                    "                               labelWidth: 120,",
                    "                               allowBlank: false,",
                    "                               fieldLabel: 'Product Name'",
                    "                           },",
                    "                           {",
                    "                               xtype: 'textfield',",
                    "                               width: 800,",
                    "                               id: 'txtProductDescription',",
                    "                               labelWidth: 120,",
                    "                               allowBlank: false,",
                    "                               fieldLabel: 'Product Description'",
                    "                           },",
                    "",
                    "",
                    "                           {",
                    "                               xtype: 'textfield',",
                    "                               width: 800,",
                    "                               labelWidth: 120,",
                    "                               id:'txtProductPrice',",
                    "                               regex: /^[1-9][0-9]*$/,",
                    "                               allowBlank: false,",
                    "                               fieldLabel: 'Product Price'",
                    "                           },",
                    "",
                    "                           {",
                    "                               xtype: 'textfield',",
                    "                               width: 800,",
                    "                               labelWidth: 120,",
                    "                               id:'txtProductQuantity',",
                    "                               regex: /^[1-9][0-9]*$/,",
                    "                               allowBlank: false,",
                    "                               fieldLabel: 'In Stock Quantity'",
                    "                           },",
                    "                           {",
                    "                               xtype: 'textfield',",
                    "                               width: 800,",
                    "                               labelWidth: 120,",
                    "                               id: 'productImagePath',",
                    "                               allowBlank: false,",
                    "                               fieldLabel: 'Image Path'",
                    "                           },",
                    "",
                    "                           {",
                    "                               xtype: 'container',",
                    "                               flex: 0,",
                    "                               width: 496,",
                    "                               layout: {",
                    "                                   type: 'hbox',",
                    "                                   align: 'stretch',",
                    "                                   pack:'center'",
                    "                               },",
                    "                               items: [",
                    "                                   {",
                    "                                       xtype: 'button',",
                    "                                       width: 118,",
                    "                                       margin:'2',",
                    "                                       id: 'btnSaveProduct',",
                    "                                       text: 'Add Product'",
                    "                                   },",
                    "                                    {",
                    "                                       xtype: 'button',",
                    "                                       width: 118,",
                    "                                        margin:'2',",
                    "                                       id: 'btnReset',",
                    "                                       text: 'Reset'",
                    "                                   }",
                    "                               ]",
                    "                           }",
                    "                       ]",
                    "                   }",
                    "               ]",
                    "           });",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onBtnAddProductClick",
            "designerId": "6a0de22a-9f96-4313-8690-522ae3392469"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnUpdateProduct",
                "designer|targetType": "MyButton8",
                "fn": "onBtnUpdateProductClick",
                "implHandler": [
                    " parms = [];",
                    " var productListGrid = Ext.getCmp('productListGrid');",
                    " var productListStore = productListGrid.getStore();",
                    " var updatedRecords = productListStore.getModifiedRecords();",
                    " var updateProduct = Ext.getStore('updateProduct');",
                    " Ext.each(updatedRecords,function(record){",
                    "     if (record.dirty){",
                    "         parms.push(record.data);",
                    "         var product = {",
                    "             productName: record.data.productName,",
                    "             productDescription: record.data.productDescription,",
                    "             productPrice: record.data.productPrice,",
                    "             productQuantity: record.data.productStockQuantity,",
                    "             productImagePath: record.data.productImagePath",
                    "",
                    "         };",
                    "         updateProduct.add(product);",
                    "     }",
                    "",
                    " });",
                    "",
                    "Ext.Ajax.request({",
                    "",
                    "    url: 'update/updateProduct',",
                    "    method: POST,",
                    "",
                    "    params:{",
                    "",
                    "        jsonData: parms,",
                    "    },",
                    "",
                    "    scope: this,",
                    "    success: function(response){",
                    "        var responseText = Ext.decode(response.responseText);",
                    "",
                    "    }",
                    "",
                    "});",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onBtnUpdateProductClick",
            "designerId": "80c490c7-1bfa-4144-b286-73e77581fa6a"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "addProductContainer",
                "selector": "#AddProductContainer"
            },
            "name": "addProductContainer",
            "designerId": "832ca75f-2bfa-4d3c-a6a0-f88f6ca3e066"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnSaveProduct",
                "designer|targetType": "Ext.button.Button",
                "fn": "onBtnSaveProduct",
                "implHandler": [
                    "var productName = Ext.getCmp('txtProductName').getValue();",
                    "var productDescription = Ext.getCmp('txtProductDescription').getValue();",
                    "var productPrice = Ext.getCmp('txtProductPrice').getValue();",
                    "var productInStock = Ext.getCmp('txtProductQuantity').getValue();",
                    "var productImagePath = Ext.getCmp('productImagePath').getValue();",
                    "",
                    "Ext.Ajax.request({",
                    "       url: 'admin/addProduct',",
                    "            method: POST,",
                    "    params:{",
                    "        productName: productName,",
                    "        productDescription: productDescription,",
                    "        productPrice:productPrice,",
                    "        productStockQuantity: productInStock,",
                    "        productImagePath: productImagePath",
                    "    },",
                    "    ",
                    "    scope: this,",
                    "    success: function(response){",
                    "        var responseText = JSON.parse(response.responseText);",
                    "        alert(responseText);",
                    "    }",
                    "    ",
                    "});",
                    "",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onBtnSaveProduct",
            "designerId": "1a6746a1-1938-4493-abbf-5f8019621542"
        }
    ]
}