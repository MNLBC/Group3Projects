--DESIGN THE TABLES AND THEIR RELATIONSHIP AND CONSTRAINTS

--CREATE USER shopadmin IDENTIFIED BY admin123;

--USERS TABLE (UNABLE TO CREATE USER TABLE - USER IS  RESERVED)
CREATE TABLE USERS(

	 USER_ID       NUMBER(15)   NOT NULL PRIMARY KEY
	,USERNAME      VARCHAR(40)  UNIQUE NOT NULL 
	,USER_PASSWORD VARCHAR(100) NOT NULL
	,FIRST_NAME    VARCHAR(40)  NOT NULL
	,LAST_NAME     VARCHAR(40)  NOT NULL
	,MOBILE_NUMBER VARCHAR(15) 
	,EMAIL         VARCHAR(50)  NOT NULL
	,HOME_ADDRESS  VARCHAR(225) NOT NULL
	,USER_ROLE     VARCHAR(8)   NOT NULL
);

--ORDERS TABLE
CREATE TABLE ORDERS(
   ORDER_ID   NUMBER(15)  NOT NULL PRIMARY KEY
  ,USER_ID    NUMBER(15)  NOT NULL
  ,ORDER_DATE VARCHAR(18) NOT NULL
);

ALTER TABLE ORDERS
  ADD CONSTRAINT FK_USER_ID FOREIGN KEY (USER_ID)
  REFERENCES USERS (USER_ID);
  
SELECT * FROM ORDERS;

--PRODUCTS TABLE
CREATE TABLE PRODUCT(
    PRODUCT_ID             NUMBER(15)   NOT NULL PRIMARY KEY
   ,PRODUCT_NAME           VARCHAR(80)  UNIQUE NOT NULL
   ,PRODUCT_DESCRIPTION    VARCHAR(220) NOT NULL
   ,PRODUCT_PRICE          NUMBER(10,2) NOT NULL
   ,PRODUCT_STOCK_QUANTITY NUMBER(8)    NOT NULL
);

--ORDER ITEM TABLE
CREATE TABLE ORDER_ITEM(
    ORDER_ITEM_ID  NUMBER(15)   NOT NULL PRIMARY KEY
   ,ORDER_ID       NUMBER(15)   NOT NULL
   ,PRODUCT_ID     NUMBER(15)   NOT NULL
   ,QUANTITY       NUMBER(4)    NOT NULL
   ,ORDERED_PRICE  NUMBER(10,2) NOT NULL
);

ALTER TABLE ORDER_ITEM ADD CONSTRAINT FK_ORDER_ID FOREIGN KEY (ORDER_ID) REFERENCES ORDERS (ORDER_ID);
ALTER TABLE ORDER_ITEM ADD CONSTRAINT FK_PRODUCT_ID FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID);

SELECT * FROM PRODUCT;

